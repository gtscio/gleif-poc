GLEIF POC E2E Test Log - Fri Oct  3 12:48:00 CEST 2025
=================================
2025-10-03 12:48:00 - Setting up test environment...
2025-10-03 12:48:00 - Installing dependencies...

> gleif-poc-monorepo@0.1.0 install:all
> npm install && cd gleif-poc && npm install && cd ../twin-service && npm install && cd ../did-management && npm install

(node:90598) ExperimentalWarning: CommonJS module /Users/albertolive/.nvm/versions/node/v23.1.0/lib/node_modules/npm/node_modules/debug/src/node.js is loading ES Module /Users/albertolive/.nvm/versions/node/v23.1.0/lib/node_modules/npm/node_modules/supports-color/index.js using require().
Support for loading ES Module in require() is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)

up to date, audited 631 packages in 604ms

162 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
(node:90625) ExperimentalWarning: CommonJS module /Users/albertolive/.nvm/versions/node/v23.1.0/lib/node_modules/npm/node_modules/debug/src/node.js is loading ES Module /Users/albertolive/.nvm/versions/node/v23.1.0/lib/node_modules/npm/node_modules/supports-color/index.js using require().
Support for loading ES Module in require() is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)

up to date, audited 631 packages in 632ms

162 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
(node:90626) ExperimentalWarning: CommonJS module /Users/albertolive/.nvm/versions/node/v23.1.0/lib/node_modules/npm/node_modules/debug/src/node.js is loading ES Module /Users/albertolive/.nvm/versions/node/v23.1.0/lib/node_modules/npm/node_modules/supports-color/index.js using require().
Support for loading ES Module in require() is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)

up to date, audited 631 packages in 675ms

162 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
(node:90645) ExperimentalWarning: CommonJS module /Users/albertolive/.nvm/versions/node/v23.1.0/lib/node_modules/npm/node_modules/debug/src/node.js is loading ES Module /Users/albertolive/.nvm/versions/node/v23.1.0/lib/node_modules/npm/node_modules/supports-color/index.js using require().
Support for loading ES Module in require() is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)

up to date, audited 631 packages in 653ms

162 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
2025-10-03 12:48:03 - TEST: Environment Setup - PASS
2025-10-03 12:48:03 - DETAILS: All prerequisites met and dependencies installed
2025-10-03 12:48:03 - Starting HashiCorp Vault...
6081ae83244d6d7f42b06a073dadd540d879b493893a78a27b74ceace6d78a5d
2025-10-03 12:48:04 - Waiting for Vault to be ready at http://localhost:8200/v1/sys/health...
2025-10-03 12:48:12 - Vault is ready!
2025-10-03 12:48:12 - TEST: Vault Startup - PASS
2025-10-03 12:48:12 - DETAILS: Vault started successfully on port 8200
2025-10-03 12:48:12 - Starting Twin Service...
2025-10-03 12:48:12 - Waiting for Twin Service to be ready at http://localhost:3001/create-did...

> twin-service@1.0.0 start:vault
> VAULT_ENABLED=true tsx server.js

Twin Service running on port 3001
2025-10-03 12:48:16 - Twin Service is ready!
2025-10-03 12:48:16 - TEST: Twin Service Startup - PASS
2025-10-03 12:48:16 - DETAILS: Twin Service started successfully on port 3001
2025-10-03 12:48:16 - Starting GLEIF POC Frontend...
2025-10-03 12:48:16 - Waiting for GLEIF POC Frontend to be ready at http://localhost:3000...

> gleif-poc@0.1.0 dev
> next dev --turbopack

 âš  Warning: Next.js inferred your workspace root, but it may not be correct.
 We detected multiple lockfiles and selected the directory of /Users/albertolive/Repos/iota/gleif-poc/package-lock.json as the root directory.
 To silence this warning, set `turbopack.root` in your Next.js config, or consider removing one of the lockfiles if it's not needed.
   See https://nextjs.org/docs/app/api-reference/config/next-config-js/turbopack#root-directory for more information.
 Detected additional lockfiles: 
   * /Users/albertolive/Repos/iota/gleif-poc/gleif-poc/package-lock.json

   â–² Next.js 15.5.4 (Turbopack)
   - Local:        http://localhost:3000
   - Network:      http://192.168.1.145:3000
   - Environments: .env.local

 âœ“ Starting...
 âœ“ Ready in 983ms
 âš  Webpack is configured while Turbopack is not, which may cause problems.
 âš  See instructions if you need to configure Turbopack:
  https://nextjs.org/docs/app/api-reference/next-config-js/turbopack

 â—‹ Compiling / ...
 âœ“ Compiled / in 3s
 GET / 200 in 3344ms
2025-10-03 12:48:22 - GLEIF POC Frontend is ready!
2025-10-03 12:48:22 - TEST: GLEIF POC Startup - PASS
2025-10-03 12:48:22 - DETAILS: Frontend started successfully on port 3000
2025-10-03 12:48:22 - Testing DID creation...
2025-10-03 12:48:22 - Checking IOTA network connectivity at https://api.testnet.iota.cafe...
2025-10-03 12:48:22 - âœ… IOTA network is accessible
ðŸ” Creating real IOTA testnet DID using TWIN Identity Connector...
âŒ Failed to create DID document: factory.noGet
Full error details: GeneralError: factory.noGet
    at Factory.get (file:///Users/albertolive/Repos/iota/gleif-poc/twin-service/node_modules/@twin.org/core/dist/esm/index.mjs:2096:19)
    at new IotaIdentityConnector (file:///Users/albertolive/Repos/iota/gleif-poc/twin-service/node_modules/@twin.org/identity-connector-iota/dist/esm/index.mjs:71:54)
    at createIdentityConnector (/Users/albertolive/Repos/iota/gleif-poc/twin-service/lib/twin-connectors.ts:44:29)
    at createDIDDocument (/Users/albertolive/Repos/iota/gleif-poc/twin-service/lib/twin-utils.ts:74:31)
    at file:///Users/albertolive/Repos/iota/gleif-poc/twin-service/server.js:34:23
    at Layer.handleRequest (/Users/albertolive/Repos/iota/gleif-poc/twin-service/node_modules/router/lib/layer.js:152:17)
    at next (/Users/albertolive/Repos/iota/gleif-poc/twin-service/node_modules/router/lib/route.js:157:13)
    at Route.dispatch (/Users/albertolive/Repos/iota/gleif-poc/twin-service/node_modules/router/lib/route.js:117:3)
    at handle (/Users/albertolive/Repos/iota/gleif-poc/twin-service/node_modules/router/index.js:435:11)
    at Layer.handleRequest (/Users/albertolive/Repos/iota/gleif-poc/twin-service/node_modules/router/lib/layer.js:152:17) {
  source: 'Factory',
  properties: { typeName: 'vault', name: 'vault' },
  inner: undefined
}
2025-10-03 12:48:23 - TEST: DID Creation - FAIL
2025-10-03 12:48:23 - DETAILS: DID creation output: ðŸš€ Creating a new TWIN ID...
âŒ Failed to create TWIN ID: HTTP error! status: 500
Error: HTTP error! status: 500
    at createIdentity (file:///Users/albertolive/Repos/iota/gleif-poc/did-management/manage-did.js:20:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async main (file:///Users/albertolive/Repos/iota/gleif-poc/did-management/manage-did.js:71:3)
2025-10-03 12:48:23 - Testing credential generation...
--- Starting Real Credential Generation ---
âœ… Using IOTA DID: did:iota:testnet:1759481376323g01lju9zyo
--- Creating Placeholder Signed Credential ---
âœ… Placeholder cryptographic files created in ../gleif-poc/public/.well-known/keri
2025-10-03 12:48:23 - TEST: Credential Generation - PASS
2025-10-03 12:48:23 - DETAILS: KERI credential files created successfully
2025-10-03 12:48:23 - Testing API endpoints...
2025-10-03 12:48:23 - Checking IOTA network connectivity at https://api.testnet.iota.cafe...
2025-10-03 12:48:23 - âœ… IOTA network is accessible
ðŸ” Creating real IOTA testnet DID using TWIN Identity Connector...
âŒ Failed to create DID document: factory.noGet
Full error details: GeneralError: factory.noGet
    at Factory.get (file:///Users/albertolive/Repos/iota/gleif-poc/twin-service/node_modules/@twin.org/core/dist/esm/index.mjs:2096:19)
    at new IotaIdentityConnector (file:///Users/albertolive/Repos/iota/gleif-poc/twin-service/node_modules/@twin.org/identity-connector-iota/dist/esm/index.mjs:71:54)
    at createIdentityConnector (/Users/albertolive/Repos/iota/gleif-poc/twin-service/lib/twin-connectors.ts:44:29)
    at createDIDDocument (/Users/albertolive/Repos/iota/gleif-poc/twin-service/lib/twin-utils.ts:74:31)
    at file:///Users/albertolive/Repos/iota/gleif-poc/twin-service/server.js:34:23
    at Layer.handleRequest (/Users/albertolive/Repos/iota/gleif-poc/twin-service/node_modules/router/lib/layer.js:152:17)
    at next (/Users/albertolive/Repos/iota/gleif-poc/twin-service/node_modules/router/lib/route.js:157:13)
    at Route.dispatch (/Users/albertolive/Repos/iota/gleif-poc/twin-service/node_modules/router/lib/route.js:117:3)
    at handle (/Users/albertolive/Repos/iota/gleif-poc/twin-service/node_modules/router/index.js:435:11)
    at Layer.handleRequest (/Users/albertolive/Repos/iota/gleif-poc/twin-service/node_modules/router/lib/layer.js:152:17) {
  source: 'Factory',
  properties: { typeName: 'vault', name: 'vault' },
  inner: undefined
}
2025-10-03 12:48:23 - âŒ Twin Service /create-did endpoint failed
2025-10-03 12:48:23 - âŒ Twin Service /resolve-did endpoint failed
 âœ“ Compiled /api/verify in 281ms
[Verifier] Starting LIVE verification for: test
[Verifier] Resolving TWIN ID from the DLT...
[Verifier] Verification failed: Failed to resolve DID: Internal Server Error
 POST /api/verify 200 in 633ms
2025-10-03 12:48:24 - âœ… Frontend /api/verify endpoint working
2025-10-03 12:48:24 - TEST: API Endpoints - FAIL
2025-10-03 12:48:24 - DETAILS: 1/3 endpoints working
2025-10-03 12:48:24 - Testing verification flow...
[Verifier] Starting LIVE verification for: did:iota:testnet:1759481376323g01lju9zyo
[Verifier] Resolving TWIN ID from the DLT...
[Verifier] Verification failed: Failed to resolve DID: Internal Server Error
 POST /api/verify 200 in 304ms
2025-10-03 12:48:24 - TEST: Verification Flow - FAIL
2025-10-03 12:48:24 - DETAILS: DID not verified: Could not resolve the DID from the DLT. Error: Failed to resolve DID: Internal Server Error
2025-10-03 12:48:24 - Testing IOTA explorer links...
[Verifier] Starting LIVE verification for: did:iota:testnet:1759481376323g01lju9zyo
[Verifier] Resolving TWIN ID from the DLT...
[Verifier] Verification failed: Failed to resolve DID: Internal Server Error
 POST /api/verify 200 in 340ms
2025-10-03 12:48:24 - TEST: Explorer Links - FAIL
2025-10-03 12:48:24 - DETAILS: Cannot test explorer links - verification failed
2025-10-03 12:48:24 - Testing frontend build...

> gleif-poc@0.1.0 prebuild
> node scripts/ensure-credentials.js

âœ… KERI credential files already exist. Skipping generation.

> gleif-poc@0.1.0 build
> npm run prebuild && next build --turbopack


> gleif-poc@0.1.0 prebuild
> node scripts/ensure-credentials.js

âœ… KERI credential files already exist. Skipping generation.
 âš  Warning: Next.js inferred your workspace root, but it may not be correct.
 We detected multiple lockfiles and selected the directory of /Users/albertolive/Repos/iota/gleif-poc/package-lock.json as the root directory.
 To silence this warning, set `turbopack.root` in your Next.js config, or consider removing one of the lockfiles if it's not needed.
   See https://nextjs.org/docs/app/api-reference/config/next-config-js/turbopack#root-directory for more information.
 Detected additional lockfiles: 
   * /Users/albertolive/Repos/iota/gleif-poc/gleif-poc/package-lock.json

   â–² Next.js 15.5.4 (Turbopack)
   - Environments: .env.local

   Creating an optimized production build ...
 âš  Webpack is configured while Turbopack is not, which may cause problems.
 âš  See instructions if you need to configure Turbopack:
  https://nextjs.org/docs/app/api-reference/next-config-js/turbopack

 âš  Slow filesystem detected. The benchmark took 1645ms. If /Users/albertolive/Repos/iota/gleif-poc/gleif-poc/.next is a network drive, consider moving it to a local folder. If you have an antivirus enabled, consider excluding your project directory.
 âœ“ Finished writing to disk in 17ms
 âœ“ Compiled successfully in 3.8s
   Linting and checking validity of types ...
   Collecting page data ...
   Generating static pages (0/6) ...
   Generating static pages (1/6) 
   Generating static pages (2/6) 
   Generating static pages (4/6) 
 âœ“ Generating static pages (6/6)
   Finalizing page optimization ...
   Collecting build traces ...

Route (app)                         Size  First Load JS
â”Œ â—‹ /                            1.86 kB         115 kB
â”œ â—‹ /_not-found                      0 B         113 kB
â”” Æ’ /api/verify                      0 B            0 B
+ First Load JS shared by all     118 kB
  â”œ chunks/52bbddf44b001337.js   21.7 kB
  â”œ chunks/ab9be13326c139ce.js   75.4 kB
  â”” other shared chunks (total)    21 kB


â—‹  (Static)   prerendered as static content
Æ’  (Dynamic)  server-rendered on demand

2025-10-03 12:48:38 - TEST: Frontend Build - PASS
2025-10-03 12:48:38 - DETAILS: Build completed successfully
2025-10-03 12:48:38 - Generating test report...
2025-10-03 12:48:38 - Checking IOTA network connectivity at https://api.testnet.iota.cafe...
2025-10-03 12:48:38 - âœ… IOTA network is accessible
2025-10-03 12:48:38 - Generating test report...
2025-10-03 12:48:38 - Checking IOTA network connectivity at https://api.testnet.iota.cafe...
2025-10-03 12:48:38 - âœ… IOTA network is accessible
npm error Lifecycle script `start:vault` failed with error:
[?25hnpm error code 143

npm error path /Users/albertolive/Repos/iota/gleif-poc/twin-service
npm error workspace twin-service@1.0.0
npm error location /Users/albertolive/Repos/iota/gleif-poc/twin-service
npm error command failed
npm error command sh -c VAULT_ENABLED=true tsx server.js

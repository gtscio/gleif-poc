GLEIF POC E2E Test Log - Fri Oct  3 13:15:57 CEST 2025
=================================
2025-10-03 13:15:57 - Setting up test environment...
2025-10-03 13:15:57 - Installing dependencies...

> gleif-poc-monorepo@0.1.0 install:all
> npm install && cd gleif-poc && npm install && cd ../twin-service && npm install && cd ../did-management && npm install

(node:25394) ExperimentalWarning: CommonJS module /Users/albertolive/.nvm/versions/node/v23.1.0/lib/node_modules/npm/node_modules/debug/src/node.js is loading ES Module /Users/albertolive/.nvm/versions/node/v23.1.0/lib/node_modules/npm/node_modules/supports-color/index.js using require().
Support for loading ES Module in require() is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)

up to date, audited 631 packages in 706ms

162 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
(node:25410) ExperimentalWarning: CommonJS module /Users/albertolive/.nvm/versions/node/v23.1.0/lib/node_modules/npm/node_modules/debug/src/node.js is loading ES Module /Users/albertolive/.nvm/versions/node/v23.1.0/lib/node_modules/npm/node_modules/supports-color/index.js using require().
Support for loading ES Module in require() is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)

up to date, audited 631 packages in 638ms

162 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
(node:25412) ExperimentalWarning: CommonJS module /Users/albertolive/.nvm/versions/node/v23.1.0/lib/node_modules/npm/node_modules/debug/src/node.js is loading ES Module /Users/albertolive/.nvm/versions/node/v23.1.0/lib/node_modules/npm/node_modules/supports-color/index.js using require().
Support for loading ES Module in require() is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)

up to date, audited 631 packages in 762ms

162 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
(node:25413) ExperimentalWarning: CommonJS module /Users/albertolive/.nvm/versions/node/v23.1.0/lib/node_modules/npm/node_modules/debug/src/node.js is loading ES Module /Users/albertolive/.nvm/versions/node/v23.1.0/lib/node_modules/npm/node_modules/supports-color/index.js using require().
Support for loading ES Module in require() is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)

up to date, audited 631 packages in 695ms

162 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
2025-10-03 13:16:01 - TEST: Environment Setup - PASS
2025-10-03 13:16:01 - DETAILS: All prerequisites met and dependencies installed
2025-10-03 13:16:01 - Starting HashiCorp Vault...
7796af0547d17bd072b6791154a951f4c7da0c90fff82895722a68b207af0e41
2025-10-03 13:16:01 - Waiting for Vault to be ready at http://localhost:8200/v1/sys/health...
2025-10-03 13:16:06 - Vault is ready!
2025-10-03 13:16:06 - TEST: Vault Startup - PASS
2025-10-03 13:16:06 - DETAILS: Vault started successfully on port 8200
2025-10-03 13:16:06 - Starting Twin Service...
2025-10-03 13:16:06 - Waiting for Twin Service to be ready at http://localhost:3001/create-did...

> twin-service@1.0.0 start:vault
> VAULT_ENABLED=true tsx server.js

Twin Service running on port 3001
2025-10-03 13:16:08 - Twin Service is ready!
2025-10-03 13:16:08 - TEST: Twin Service Startup - PASS
2025-10-03 13:16:08 - DETAILS: Twin Service started successfully on port 3001
2025-10-03 13:16:08 - Starting GLEIF POC Frontend...
2025-10-03 13:16:08 - Waiting for GLEIF POC Frontend to be ready at http://localhost:3000...

> gleif-poc@0.1.0 dev
> next dev --turbopack

 âš  Warning: Next.js inferred your workspace root, but it may not be correct.
 We detected multiple lockfiles and selected the directory of /Users/albertolive/Repos/iota/gleif-poc/package-lock.json as the root directory.
 To silence this warning, set `turbopack.root` in your Next.js config, or consider removing one of the lockfiles if it's not needed.
   See https://nextjs.org/docs/app/api-reference/config/next-config-js/turbopack#root-directory for more information.
 Detected additional lockfiles: 
   * /Users/albertolive/Repos/iota/gleif-poc/gleif-poc/package-lock.json

   â–² Next.js 15.5.4 (Turbopack)
   - Local:        http://localhost:3000
   - Network:      http://192.168.1.145:3000
   - Environments: .env.local

 âœ“ Starting...
 âœ“ Ready in 1009ms
 âš  Webpack is configured while Turbopack is not, which may cause problems.
 âš  See instructions if you need to configure Turbopack:
  https://nextjs.org/docs/app/api-reference/next-config-js/turbopack

 â—‹ Compiling / ...
 âœ“ Compiled / in 1558ms
 GET / 200 in 1776ms
2025-10-03 13:16:11 - GLEIF POC Frontend is ready!
2025-10-03 13:16:11 - TEST: GLEIF POC Startup - PASS
2025-10-03 13:16:12 - DETAILS: Frontend started successfully on port 3000
2025-10-03 13:16:12 - Testing DID creation...
2025-10-03 13:16:12 - Checking IOTA network connectivity at https://api.testnet.iota.cafe...
2025-10-03 13:16:12 - âœ… IOTA network is accessible
ðŸ” Creating real IOTA testnet DID using TWIN Identity Connector...
Identity connector created with config: { nodeUrl: 'https://api.testnet.iota.cafe', network: 'testnet' }
âœ… New IOTA testnet DID created successfully using TWIN Identity Connector! DID: did:iota:testnet:0x081dedb6a3a08961fcf16c5af90424736feb36072f9623c16ece9213c4d7a8ca
2025-10-03 13:16:16 - TEST: DID Creation - PASS
2025-10-03 13:16:16 - DETAILS: DID created: did:iota:testnet:0x081dedb6a3a08961fcf16c5af90424736feb36072f9623c16ece9213c4d7a8cadid:iota:testnet:0x081dedb6a3a08961fcf16c5af90424736feb36072f9623c16ece9213c4d7a8ca
2025-10-03 13:16:16 - Testing credential generation...
--- Starting Real Credential Generation ---
âœ… Using IOTA DID: did:iota:testnet:0x081dedb6a3a08961fcf16c5af90424736feb36072f9623c16ece9213c4d7a8ca
--- Creating Placeholder Signed Credential ---
âœ… Placeholder cryptographic files created in ../gleif-poc/public/.well-known/keri
2025-10-03 13:16:16 - TEST: Credential Generation - PASS
2025-10-03 13:16:16 - DETAILS: KERI credential files created successfully
2025-10-03 13:16:16 - Testing API endpoints...
2025-10-03 13:16:16 - Checking IOTA network connectivity at https://api.testnet.iota.cafe...
2025-10-03 13:16:16 - âœ… IOTA network is accessible
ðŸ” Creating real IOTA testnet DID using TWIN Identity Connector...
Identity connector created with config: { nodeUrl: 'https://api.testnet.iota.cafe', network: 'testnet' }
âœ… New IOTA testnet DID created successfully using TWIN Identity Connector! DID: did:iota:testnet:0x013b90cd894cf5bbf3669fad827226faeca443ea213bfcec9c7d5b7288fd4ad2
2025-10-03 13:16:20 - âœ… Twin Service /create-did endpoint working
2025-10-03 13:16:20 - âœ… Twin Service /resolve-did endpoint working
 âœ“ Compiled /api/verify in 261ms
[Verifier] Starting LIVE verification for: test
[Verifier] Resolving TWIN ID from the DLT...
[Verifier] Verification failed: Failed to resolve DID: Internal Server Error
 POST /api/verify 200 in 588ms
2025-10-03 13:16:20 - âœ… Frontend /api/verify endpoint working
2025-10-03 13:16:20 - TEST: API Endpoints - PASS
2025-10-03 13:16:20 - DETAILS: 3/3 endpoints working
2025-10-03 13:16:20 - Testing verification flow...
[Verifier] Starting LIVE verification for: did:iota:testnet:0x081dedb6a3a08961fcf16c5af90424736feb36072f9623c16ece9213c4d7a8ca
[Verifier] Resolving TWIN ID from the DLT...
[Verifier] Successfully resolved IOTA DID: did:iota:testnet:0x081dedb6a3a08961fcf16c5af90424736feb36072f9623c16ece9213c4d7a8ca
[Verifier] Checking vLEI credential for linkage...
[Verifier] Found linkage in vLEI credential: did:iota:testnet:0x081dedb6a3a08961fcf16c5af90424736feb36072f9623c16ece9213c4d7a8ca
[Verifier] Verifying linkage...
âœ… SUCCESS: Linkage confirmed via vLEI credential!
[Verifier] vLEI DID: Eabc123_placeholder_legal_entity_aid
[Verifier] Creating DID document and minting NFT attestation...
ðŸ” Creating real IOTA testnet DID using TWIN Identity Connector...
Identity connector created with config: { nodeUrl: 'https://api.testnet.iota.cafe', network: 'testnet' }
âœ… New IOTA testnet DID created successfully using TWIN Identity Connector! DID: did:iota:testnet:0x9cf4c9f5d6fead6d80ed2786cc95eb2de0bfe7973ab175b06afffcccabe27721
[Verifier] NFT minting failed, but verification successful
 POST /api/verify 200 in 1667ms
2025-10-03 13:16:22 - TEST: Verification Flow - PASS
2025-10-03 13:16:22 - DETAILS: DID verified with attestation DID: did:iota:testnet:0x9cf4c9f5d6fead6d80ed2786cc95eb2de0bfe7973ab175b06afffcccabe27721, NFT: null
2025-10-03 13:16:22 - Testing IOTA explorer links...
[Verifier] Starting LIVE verification for: did:iota:testnet:0x081dedb6a3a08961fcf16c5af90424736feb36072f9623c16ece9213c4d7a8ca
[Verifier] Resolving TWIN ID from the DLT...
[Verifier] Successfully resolved IOTA DID: did:iota:testnet:0x081dedb6a3a08961fcf16c5af90424736feb36072f9623c16ece9213c4d7a8ca
[Verifier] Checking vLEI credential for linkage...
[Verifier] Found linkage in vLEI credential: did:iota:testnet:0x081dedb6a3a08961fcf16c5af90424736feb36072f9623c16ece9213c4d7a8ca
[Verifier] Verifying linkage...
âœ… SUCCESS: Linkage confirmed via vLEI credential!
[Verifier] vLEI DID: Eabc123_placeholder_legal_entity_aid
[Verifier] Creating DID document and minting NFT attestation...
ðŸ” Creating real IOTA testnet DID using TWIN Identity Connector...
Identity connector created with config: { nodeUrl: 'https://api.testnet.iota.cafe', network: 'testnet' }
âœ… New IOTA testnet DID created successfully using TWIN Identity Connector! DID: did:iota:testnet:0xf0628c5ee47243f54d453fe5325e70025aa0c0b545f5db508b5d14656d719273
[Verifier] NFT minting failed, but verification successful
 POST /api/verify 200 in 6128ms
2025-10-03 13:16:28 - âœ… DID format valid for explorer
2025-10-03 13:16:28 - âœ… Attestation DID format valid for explorer
2025-10-03 13:16:28 - TEST: Explorer Links - PASS
2025-10-03 13:16:28 - DETAILS: 2/2 link formats valid
2025-10-03 13:16:28 - Testing frontend build...

> gleif-poc@0.1.0 prebuild
> node scripts/ensure-credentials.js

âœ… KERI credential files already exist. Skipping generation.

> gleif-poc@0.1.0 build
> npm run prebuild && next build --turbopack


> gleif-poc@0.1.0 prebuild
> node scripts/ensure-credentials.js

âœ… KERI credential files already exist. Skipping generation.
 âš  Warning: Next.js inferred your workspace root, but it may not be correct.
 We detected multiple lockfiles and selected the directory of /Users/albertolive/Repos/iota/gleif-poc/package-lock.json as the root directory.
 To silence this warning, set `turbopack.root` in your Next.js config, or consider removing one of the lockfiles if it's not needed.
   See https://nextjs.org/docs/app/api-reference/config/next-config-js/turbopack#root-directory for more information.
 Detected additional lockfiles: 
   * /Users/albertolive/Repos/iota/gleif-poc/gleif-poc/package-lock.json

   â–² Next.js 15.5.4 (Turbopack)
   - Environments: .env.local

   Creating an optimized production build ...
 âš  Webpack is configured while Turbopack is not, which may cause problems.
 âš  See instructions if you need to configure Turbopack:
  https://nextjs.org/docs/app/api-reference/next-config-js/turbopack

 âœ“ Finished writing to disk in 12ms
 âœ“ Compiled successfully in 1310ms
   Linting and checking validity of types ...
   Collecting page data ...
   Generating static pages (0/6) ...
   Generating static pages (1/6) 
   Generating static pages (2/6) 
   Generating static pages (4/6) 
 âœ“ Generating static pages (6/6)
   Finalizing page optimization ...
   Collecting build traces ...

Route (app)                         Size  First Load JS
â”Œ â—‹ /                            1.86 kB         115 kB
â”œ â—‹ /_not-found                      0 B         113 kB
â”” Æ’ /api/verify                      0 B            0 B
+ First Load JS shared by all     118 kB
  â”œ chunks/52bbddf44b001337.js   21.7 kB
  â”œ chunks/ab9be13326c139ce.js   75.4 kB
  â”” other shared chunks (total)    21 kB


â—‹  (Static)   prerendered as static content
Æ’  (Dynamic)  server-rendered on demand

2025-10-03 13:16:36 - TEST: Frontend Build - PASS
2025-10-03 13:16:36 - DETAILS: Build completed successfully
2025-10-03 13:16:36 - Generating test report...
2025-10-03 13:16:36 - Checking IOTA network connectivity at https://api.testnet.iota.cafe...
2025-10-03 13:16:36 - âœ… IOTA network is accessible
2025-10-03 13:16:36 - Generating test report...
2025-10-03 13:16:36 - Checking IOTA network connectivity at https://api.testnet.iota.cafe...
2025-10-03 13:16:36 - âœ… IOTA network is accessible
npm error Lifecycle script `start:vault` failed with error:
npm error code 143
npm error path /Users/albertolive/Repos/iota/gleif-poc/twin-service
npm error workspace twin-service@1.0.0
npm error location /Users/albertolive/Repos/iota/gleif-poc/twin-service
npm error command failed
npm error command sh -c VAULT_ENABLED=true tsx server.js
[?25h

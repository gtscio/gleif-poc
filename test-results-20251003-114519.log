GLEIF POC E2E Test Log - Fri Oct  3 11:45:19 CEST 2025
=================================
2025-10-03 11:45:19 - Setting up test environment...
2025-10-03 11:45:19 - Installing dependencies...

> gleif-poc-monorepo@0.1.0 install:all
> npm install && cd gleif-poc && npm install && cd ../twin-service && npm install && cd ../did-management && npm install

(node:47376) ExperimentalWarning: CommonJS module /Users/albertolive/.nvm/versions/node/v23.1.0/lib/node_modules/npm/node_modules/debug/src/node.js is loading ES Module /Users/albertolive/.nvm/versions/node/v23.1.0/lib/node_modules/npm/node_modules/supports-color/index.js using require().
Support for loading ES Module in require() is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)

up to date, audited 631 packages in 836ms

162 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
(node:47401) ExperimentalWarning: CommonJS module /Users/albertolive/.nvm/versions/node/v23.1.0/lib/node_modules/npm/node_modules/debug/src/node.js is loading ES Module /Users/albertolive/.nvm/versions/node/v23.1.0/lib/node_modules/npm/node_modules/supports-color/index.js using require().
Support for loading ES Module in require() is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)

up to date, audited 631 packages in 1s

162 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
(node:47402) ExperimentalWarning: CommonJS module /Users/albertolive/.nvm/versions/node/v23.1.0/lib/node_modules/npm/node_modules/debug/src/node.js is loading ES Module /Users/albertolive/.nvm/versions/node/v23.1.0/lib/node_modules/npm/node_modules/supports-color/index.js using require().
Support for loading ES Module in require() is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)

up to date, audited 631 packages in 1s

162 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
(node:47426) ExperimentalWarning: CommonJS module /Users/albertolive/.nvm/versions/node/v23.1.0/lib/node_modules/npm/node_modules/debug/src/node.js is loading ES Module /Users/albertolive/.nvm/versions/node/v23.1.0/lib/node_modules/npm/node_modules/supports-color/index.js using require().
Support for loading ES Module in require() is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)

up to date, audited 631 packages in 1s

162 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
2025-10-03 11:45:26 - TEST: Environment Setup - PASS
2025-10-03 11:45:26 - DETAILS: All prerequisites met and dependencies installed
2025-10-03 11:45:26 - Starting HashiCorp Vault...
e66e41c3b963a2cfdce56e5deb4cb0e9ecb62047048cf03f0be9f0fe6ceb167e
2025-10-03 11:45:27 - Waiting for Vault to be ready at http://localhost:8200/v1/sys/health...
2025-10-03 11:45:33 - Vault is ready!
2025-10-03 11:45:33 - TEST: Vault Startup - PASS
2025-10-03 11:45:33 - DETAILS: Vault started successfully on port 8200
2025-10-03 11:45:33 - Starting Twin Service...
2025-10-03 11:45:33 - Waiting for Twin Service to be ready at http://localhost:3001/create-did...

> twin-service@1.0.0 start:vault
> VAULT_ENABLED=true tsx server.js

Twin Service running on port 3001
2025-10-03 11:45:35 - Twin Service is ready!
2025-10-03 11:45:35 - TEST: Twin Service Startup - PASS
2025-10-03 11:45:35 - DETAILS: Twin Service started successfully on port 3001
2025-10-03 11:45:35 - Starting GLEIF POC Frontend...
2025-10-03 11:45:35 - Waiting for GLEIF POC Frontend to be ready at http://localhost:3000...

> gleif-poc@0.1.0 dev
> next dev --turbopack

 âš  Warning: Next.js inferred your workspace root, but it may not be correct.
 We detected multiple lockfiles and selected the directory of /Users/albertolive/Repos/iota/gleif-poc/package-lock.json as the root directory.
 To silence this warning, set `turbopack.root` in your Next.js config, or consider removing one of the lockfiles if it's not needed.
   See https://nextjs.org/docs/app/api-reference/config/next-config-js/turbopack#root-directory for more information.
 Detected additional lockfiles: 
   * /Users/albertolive/Repos/iota/gleif-poc/gleif-poc/package-lock.json

   â–² Next.js 15.5.4 (Turbopack)
   - Local:        http://localhost:3000
   - Network:      http://192.168.1.145:3000
   - Environments: .env.local

 âœ“ Starting...
 âœ“ Ready in 1158ms
 âš  Webpack is configured while Turbopack is not, which may cause problems.
 âš  See instructions if you need to configure Turbopack:
  https://nextjs.org/docs/app/api-reference/next-config-js/turbopack

 â—‹ Compiling / ...
 âœ“ Compiled / in 3.1s
 GET / 200 in 3437ms
2025-10-03 11:45:41 - GLEIF POC Frontend is ready!
2025-10-03 11:45:41 - TEST: GLEIF POC Startup - PASS
2025-10-03 11:45:41 - DETAILS: Frontend started successfully on port 3000
2025-10-03 11:45:41 - Testing DID creation...
2025-10-03 11:45:41 - Checking IOTA network connectivity at https://api.testnet.iota.cafe...
2025-10-03 11:45:42 - âœ… IOTA network is accessible
ðŸ” Creating real IOTA testnet DID using TWIN Identity Connector...
âŒ Failed to create DID document: factory.noGet
2025-10-03 11:45:42 - TEST: DID Creation - FAIL
2025-10-03 11:45:42 - DETAILS: DID creation output: ðŸš€ Creating a new TWIN ID...
âŒ Failed to create TWIN ID: HTTP error! status: 500
Error: HTTP error! status: 500
    at createIdentity (file:///Users/albertolive/Repos/iota/gleif-poc/did-management/manage-did.js:20:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async main (file:///Users/albertolive/Repos/iota/gleif-poc/did-management/manage-did.js:71:3)
2025-10-03 11:45:42 - Testing credential generation...
--- Starting Real Credential Generation ---
âœ… Using IOTA DID: did:iota:testnet:1759481376323g01lju9zyo
--- Creating Placeholder Signed Credential ---
âœ… Placeholder cryptographic files created in ../gleif-poc/public/.well-known/keri
2025-10-03 11:45:42 - TEST: Credential Generation - PASS
2025-10-03 11:45:42 - DETAILS: KERI credential files created successfully
2025-10-03 11:45:42 - Testing API endpoints...
2025-10-03 11:45:42 - Checking IOTA network connectivity at https://api.testnet.iota.cafe...
2025-10-03 11:45:42 - âœ… IOTA network is accessible
ðŸ” Creating real IOTA testnet DID using TWIN Identity Connector...
âŒ Failed to create DID document: factory.noGet
2025-10-03 11:45:42 - âŒ Twin Service /create-did endpoint failed
2025-10-03 11:45:43 - âŒ Twin Service /resolve-did endpoint failed
 âœ“ Compiled /api/verify in 387ms
[Verifier] Starting LIVE verification for: test
[Verifier] Resolving TWIN ID from the DLT...
[Verifier] Verification failed: Failed to resolve DID: Internal Server Error
 POST /api/verify 200 in 786ms
2025-10-03 11:45:43 - âœ… Frontend /api/verify endpoint working
2025-10-03 11:45:43 - TEST: API Endpoints - FAIL
2025-10-03 11:45:43 - DETAILS: 1/3 endpoints working
2025-10-03 11:45:43 - Testing verification flow...
[Verifier] Starting LIVE verification for: did:iota:testnet:1759481376323g01lju9zyo
[Verifier] Resolving TWIN ID from the DLT...
[Verifier] Verification failed: Failed to resolve DID: Internal Server Error
 POST /api/verify 200 in 354ms
2025-10-03 11:45:44 - TEST: Verification Flow - FAIL
2025-10-03 11:45:44 - DETAILS: DID not verified: Could not resolve the DID from the DLT. Error: Failed to resolve DID: Internal Server Error
2025-10-03 11:45:44 - Testing IOTA explorer links...
[Verifier] Starting LIVE verification for: did:iota:testnet:1759481376323g01lju9zyo
[Verifier] Resolving TWIN ID from the DLT...
[Verifier] Verification failed: Failed to resolve DID: Internal Server Error
 POST /api/verify 200 in 315ms
2025-10-03 11:45:44 - TEST: Explorer Links - FAIL
2025-10-03 11:45:44 - DETAILS: Cannot test explorer links - verification failed
2025-10-03 11:45:44 - Testing frontend build...

> gleif-poc@0.1.0 prebuild
> node scripts/ensure-credentials.js

âœ… KERI credential files already exist. Skipping generation.

> gleif-poc@0.1.0 build
> npm run prebuild && next build --turbopack


> gleif-poc@0.1.0 prebuild
> node scripts/ensure-credentials.js

âœ… KERI credential files already exist. Skipping generation.
 âš  Warning: Next.js inferred your workspace root, but it may not be correct.
 We detected multiple lockfiles and selected the directory of /Users/albertolive/Repos/iota/gleif-poc/package-lock.json as the root directory.
 To silence this warning, set `turbopack.root` in your Next.js config, or consider removing one of the lockfiles if it's not needed.
   See https://nextjs.org/docs/app/api-reference/config/next-config-js/turbopack#root-directory for more information.
 Detected additional lockfiles: 
   * /Users/albertolive/Repos/iota/gleif-poc/gleif-poc/package-lock.json

   â–² Next.js 15.5.4 (Turbopack)
   - Environments: .env.local

   Creating an optimized production build ...
 âš  Webpack is configured while Turbopack is not, which may cause problems.
 âš  See instructions if you need to configure Turbopack:
  https://nextjs.org/docs/app/api-reference/next-config-js/turbopack

 âœ“ Finished writing to disk in 27ms
 âœ“ Compiled successfully in 3.6s
   Linting and checking validity of types ...
   Collecting page data ...
   Generating static pages (0/6) ...
   Generating static pages (1/6) 
   Generating static pages (2/6) 
   Generating static pages (4/6) 
 âœ“ Generating static pages (6/6)
   Finalizing page optimization ...
   Collecting build traces ...

Route (app)                         Size  First Load JS
â”Œ â—‹ /                            1.86 kB         115 kB
â”œ â—‹ /_not-found                      0 B         113 kB
â”” Æ’ /api/verify                      0 B            0 B
+ First Load JS shared by all     118 kB
  â”œ chunks/52bbddf44b001337.js   21.7 kB
  â”œ chunks/ab9be13326c139ce.js   75.4 kB
  â”” other shared chunks (total)    21 kB


â—‹  (Static)   prerendered as static content
Æ’  (Dynamic)  server-rendered on demand

2025-10-03 11:46:00 - TEST: Frontend Build - PASS
2025-10-03 11:46:00 - DETAILS: Build completed successfully
2025-10-03 11:46:00 - Generating test report...
2025-10-03 11:46:00 - Checking IOTA network connectivity at https://api.testnet.iota.cafe...
2025-10-03 11:46:00 - âœ… IOTA network is accessible
2025-10-03 11:46:00 - Generating test report...
2025-10-03 11:46:00 - Checking IOTA network connectivity at https://api.testnet.iota.cafe...
2025-10-03 11:46:00 - âœ… IOTA network is accessible
npm error Lifecycle script `start:vault` failed with error:
npm error code 143
npm error path /Users/albertolive/Repos/iota/gleif-poc/twin-service
npm error workspace twin-service@1.0.0
npm error location /Users/albertolive/Repos/iota/gleif-poc/twin-service
npm error command failed
npm error command sh -c VAULT_ENABLED=true tsx server.js
[?25h
